# YUV_2xy_scaler 使用说明

## 前言

YUV_2xy_scaler模块用于将YUV4:4:4的axis视频流数据，分辨率放大到2倍，并且将视频格式转换为YUV4:2:2。举个例子，1920x1080@60放大为3840x2160@60。在经历了rgb2YCbCr模块的参数化编程之后，我对这种做法产生了强烈的排斥。因为虽然模块用的时候配置一下就可以实现不同位宽的转换，写一个代码等于写几个代码，但是实际上很少会有这样的应用，而且本来简单的逻辑会异常复杂。似乎只有当需求很旺盛的时候，才能参数化编程的优势。

## 数据mapping

每一帧的数据放大原理如下图所示，利用YUV的特性，UV数据可以像素间共用，完成这种异构的双线性插值。

![scaler_map](YUV_2xy_scaler使用说明.assets/scaler_map.png)

## 输入输出时序图

本模块相对简单，输入输出都是axis接口，输入rdata[23:0]具体为{R[7:0],G[7:0],B[7:0]}，与Xilinx官方定义的顺序不同，主要是因为本模块的前级输入的RGB是这个顺序，所以如此操作。输出数据tdata[23:0]则使用官方定义{V[7:0],U[7:0],Y[7:0]}。输入和输出之间有4个clock的延迟。



